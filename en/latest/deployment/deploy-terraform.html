<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Deploy HStream with Terraform | HStreamDB Documentation</title><meta name="generator" content="VuePress 1.9.5"><link rel="shortcut icon" type="image/x-icon" href="/docs/docs-images/favicon-hstreamdb.ico"><link rel="stylesheet" href="https://at.alicdn.com/t/font_3137465_redlqtflvmh.css"><script charset="utf-8" src="https://at.alicdn.com/t/font_3125249_pld7abubdat.js"></script><link rel="canonical" href="https://hstream.io/docs/en/latest/deployment/deploy-terraform.html"><meta name="docsearch:language" content="en"><meta name="docsearch:product" content="hstreamdb"><meta name="docsearch:version" content="latest"><meta name="description" content=""><meta property="og:site_name" content="HStreamDB Documentation"><meta property="og:title" content="Deploy HStream with Terraform"><meta property="og:type" content="website"><meta property="og:url" content="https://hstream.io/docs/en/latest/deployment/deploy-terraform.html"><meta name="twitter:title" content="Deploy HStream with Terraform"><meta name="twitter:url" content="https://hstream.io/docs/en/latest/deployment/deploy-terraform.html"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@EMQTech"><meta name="twitter:creator" content="@EMQTech"><meta name="twitter:image" content="https://www.emqx.com/images/logo_512.png"><meta name="twitter:image:alt" content="EMQ LOGO"><meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta property="og:image" content="https://www.emqx.com/images/logo_512.png"><link rel="preload" href="/docs/docs-assets/css/0.styles.8af203d1.css" as="style"><link rel="preload" href="/docs/docs-assets/js/app.7c12bc3f.js" as="script"><link rel="preload" href="/docs/docs-assets/js/3.a9baf225.js" as="script"><link rel="preload" href="/docs/docs-assets/js/24.1d642bb2.js" as="script"><link rel="prefetch" href="/docs/docs-assets/js/10.6aa22d4f.js"><link rel="prefetch" href="/docs/docs-assets/js/11.c6d5f171.js"><link rel="prefetch" href="/docs/docs-assets/js/12.90a51504.js"><link rel="prefetch" href="/docs/docs-assets/js/13.71a51e7a.js"><link rel="prefetch" href="/docs/docs-assets/js/14.03183e5c.js"><link rel="prefetch" href="/docs/docs-assets/js/15.8749d8f1.js"><link rel="prefetch" href="/docs/docs-assets/js/16.0ae5e4af.js"><link rel="prefetch" href="/docs/docs-assets/js/17.4c134d5b.js"><link rel="prefetch" href="/docs/docs-assets/js/18.974114cf.js"><link rel="prefetch" href="/docs/docs-assets/js/19.0aae8c41.js"><link rel="prefetch" href="/docs/docs-assets/js/20.93d620d3.js"><link rel="prefetch" href="/docs/docs-assets/js/21.7c9b5899.js"><link rel="prefetch" href="/docs/docs-assets/js/22.4018e2d0.js"><link rel="prefetch" href="/docs/docs-assets/js/23.8b4d8884.js"><link rel="prefetch" href="/docs/docs-assets/js/25.1039b3d9.js"><link rel="prefetch" href="/docs/docs-assets/js/26.26a847c8.js"><link rel="prefetch" href="/docs/docs-assets/js/27.a255ff3f.js"><link rel="prefetch" href="/docs/docs-assets/js/28.047b0dd0.js"><link rel="prefetch" href="/docs/docs-assets/js/29.12a29a85.js"><link rel="prefetch" href="/docs/docs-assets/js/30.aab5a615.js"><link rel="prefetch" href="/docs/docs-assets/js/31.c4046287.js"><link rel="prefetch" href="/docs/docs-assets/js/32.cd1193a4.js"><link rel="prefetch" href="/docs/docs-assets/js/33.42fbc57a.js"><link rel="prefetch" href="/docs/docs-assets/js/34.258cd7b0.js"><link rel="prefetch" href="/docs/docs-assets/js/35.f579df84.js"><link rel="prefetch" href="/docs/docs-assets/js/36.e54f4165.js"><link rel="prefetch" href="/docs/docs-assets/js/37.a93f0ca8.js"><link rel="prefetch" href="/docs/docs-assets/js/38.74078a1e.js"><link rel="prefetch" href="/docs/docs-assets/js/39.798a6d83.js"><link rel="prefetch" href="/docs/docs-assets/js/4.7be74661.js"><link rel="prefetch" href="/docs/docs-assets/js/40.653911b0.js"><link rel="prefetch" href="/docs/docs-assets/js/41.3cba6d09.js"><link rel="prefetch" href="/docs/docs-assets/js/42.89470bad.js"><link rel="prefetch" href="/docs/docs-assets/js/43.668b5756.js"><link rel="prefetch" href="/docs/docs-assets/js/44.4e5275dd.js"><link rel="prefetch" href="/docs/docs-assets/js/45.bb91ab12.js"><link rel="prefetch" href="/docs/docs-assets/js/46.e68e0ad4.js"><link rel="prefetch" href="/docs/docs-assets/js/47.7421a2b6.js"><link rel="prefetch" href="/docs/docs-assets/js/48.edd99fe1.js"><link rel="prefetch" href="/docs/docs-assets/js/49.e7ff93b6.js"><link rel="prefetch" href="/docs/docs-assets/js/5.4d298912.js"><link rel="prefetch" href="/docs/docs-assets/js/50.452a3e7d.js"><link rel="prefetch" href="/docs/docs-assets/js/51.cfa8b2e4.js"><link rel="prefetch" href="/docs/docs-assets/js/52.5c707f14.js"><link rel="prefetch" href="/docs/docs-assets/js/53.adfe966b.js"><link rel="prefetch" href="/docs/docs-assets/js/54.60d77cde.js"><link rel="prefetch" href="/docs/docs-assets/js/55.3aea444d.js"><link rel="prefetch" href="/docs/docs-assets/js/56.4952813e.js"><link rel="prefetch" href="/docs/docs-assets/js/57.1f04199d.js"><link rel="prefetch" href="/docs/docs-assets/js/58.53fba7a0.js"><link rel="prefetch" href="/docs/docs-assets/js/59.513ed24e.js"><link rel="prefetch" href="/docs/docs-assets/js/6.1aa5e244.js"><link rel="prefetch" href="/docs/docs-assets/js/60.d4f796f1.js"><link rel="prefetch" href="/docs/docs-assets/js/61.17dcf890.js"><link rel="prefetch" href="/docs/docs-assets/js/62.90478ed0.js"><link rel="prefetch" href="/docs/docs-assets/js/63.7926ab75.js"><link rel="prefetch" href="/docs/docs-assets/js/64.0831a883.js"><link rel="prefetch" href="/docs/docs-assets/js/65.75198d15.js"><link rel="prefetch" href="/docs/docs-assets/js/66.689c711d.js"><link rel="prefetch" href="/docs/docs-assets/js/67.dc913a01.js"><link rel="prefetch" href="/docs/docs-assets/js/68.f799beba.js"><link rel="prefetch" href="/docs/docs-assets/js/69.4d504b9d.js"><link rel="prefetch" href="/docs/docs-assets/js/7.cc99429a.js"><link rel="prefetch" href="/docs/docs-assets/js/70.80443cb3.js"><link rel="prefetch" href="/docs/docs-assets/js/71.057dce79.js"><link rel="prefetch" href="/docs/docs-assets/js/72.4a54ece6.js"><link rel="prefetch" href="/docs/docs-assets/js/73.101db2dc.js"><link rel="prefetch" href="/docs/docs-assets/js/74.4d88b71e.js"><link rel="prefetch" href="/docs/docs-assets/js/75.1fa69f76.js"><link rel="prefetch" href="/docs/docs-assets/js/76.a43d1eed.js"><link rel="prefetch" href="/docs/docs-assets/js/77.d63d2007.js"><link rel="prefetch" href="/docs/docs-assets/js/78.c3befd76.js"><link rel="prefetch" href="/docs/docs-assets/js/79.c5f43fda.js"><link rel="prefetch" href="/docs/docs-assets/js/8.6b34070a.js"><link rel="prefetch" href="/docs/docs-assets/js/80.9de32ddb.js"><link rel="prefetch" href="/docs/docs-assets/js/81.a850af2b.js"><link rel="prefetch" href="/docs/docs-assets/js/82.0adf6e57.js"><link rel="prefetch" href="/docs/docs-assets/js/83.eaa11ed3.js"><link rel="prefetch" href="/docs/docs-assets/js/84.ae6ea917.js"><link rel="prefetch" href="/docs/docs-assets/js/85.ae3d7d2d.js"><link rel="prefetch" href="/docs/docs-assets/js/86.98530c3a.js"><link rel="prefetch" href="/docs/docs-assets/js/87.4dd96983.js"><link rel="prefetch" href="/docs/docs-assets/js/88.fc92d88a.js"><link rel="prefetch" href="/docs/docs-assets/js/89.2b6d0827.js"><link rel="prefetch" href="/docs/docs-assets/js/9.2b602020.js"><link rel="prefetch" href="/docs/docs-assets/js/90.ef8d4b96.js"><link rel="prefetch" href="/docs/docs-assets/js/91.61b8f76f.js"><link rel="prefetch" href="/docs/docs-assets/js/92.28803f13.js"><link rel="prefetch" href="/docs/docs-assets/js/93.b1940dfa.js"><link rel="prefetch" href="/docs/docs-assets/js/94.d51e03c4.js"><link rel="prefetch" href="/docs/docs-assets/js/95.0adde126.js"><link rel="prefetch" href="/docs/docs-assets/js/vendors~docsearch.f0ddcd57.js"><link rel="stylesheet" href="/docs/docs-assets/css/0.styles.8af203d1.css"></head><body><div id="app" data-server-rendered="true"><div class="theme-container"><header id="app-header" class="is-clearfix is-hidden-mobile"><nav id="navbar" role="navigation" aria-label="main navigation" class="navbar is-relative"><div class="container"><div class="navbar-brand ml-0"><a href="https://hstream.io" class="navbar-item"><img loading="lazy" src="/docs/docs-assets/img/logo-hstreamdb.5dbc865d.png" alt="HStreamDB: The streaming database built for IoT data storage and real-time analytics" class="logo"></a><a role="button" aria-label="menu" aria-expanded="false" data-target="navbarBasic" class="navbar-burger"><span aria-hidden="true"></span> <span aria-hidden="true"></span> <span aria-hidden="true"></span></a></div><div class="navbar-menu" style="--extra-height:72px"><div class="navbar-start"><a href="/docs/en/latest/" class="navbar-item router-link-active">Docs </a><a href="https://hstream.io/blog" target="_self" rel="noopener" class="navbar-item">Blog </a><a href="https://hstream.io/community" target="_self" rel="noopener" class="navbar-item">Community</a><div class="navbar-item has-dropdown is-hstreamdb"><a class="navbar-link is-arrowless">Company <i class="iconfont icon-arrow-down ml-1 is-size-7"></i></a><div class="navbar-dropdown is-hstreamdb"><a href="https://www.emqx.com/en/about" target="_blank" rel="noopener" class="dropdown-item is-flex is-align-items-center is-text-normal hover:is-text-primary has-text-weight-medium"><div class="dropdown-item-icon mr-3 p-2"><img loading="lazy" src="/docs/docs-images/hstreamdb/header/icon-about.png" alt="About Us"></div>About Us </a><a href="https://www.emqx.com/en/news" target="_blank" rel="noopener" class="dropdown-item is-flex is-align-items-center is-text-normal hover:is-text-primary has-text-weight-medium"><div class="dropdown-item-icon mr-3 p-2"><img loading="lazy" src="/docs/docs-images/hstreamdb/header/icon-news.png" alt="Newsroom"></div>Newsroom </a><a href="https://www.emqx.com/en/contact?product=hstreamdb" target="_blank" rel="noopener" class="dropdown-item is-flex is-align-items-center is-text-normal hover:is-text-primary has-text-weight-medium"><div class="dropdown-item-icon mr-3 p-2"><img loading="lazy" src="/docs/docs-images/hstreamdb/header/icon-email.png" alt="Contact Us"></div>Contact Us</a></div></div></div><div class="navbar-end"><div class="lang-change navbar-item has-dropdown is-relative is-shadowless"><a class="navbar-link is-arrowless is-flex is-align-items-center"><i class="iconfont icon-language mr-1 has-text-weight-medium" style="font-size:20px"></i> English</a><div class="navbar-dropdown lang-menu is-shadowless"><a href="/docs/en/latest/" class="router-link-active navbar-item is-active">English </a><a href="/docs/zh/latest/" class="navbar-item">中文</a></div></div><div class="navbar-item is-hidden-touch"><a href="https://www.emqx.com/en/try?product=hstreamdb" target="_blank" class="button is-gradient is-trans-top has-text-weight-medium">Download</a></div><a href="https://www.emqx.com/en/try?product=hstreamdb" target="_blank" class="navbar-item is-hidden-desktop">Download</a></div></div></div></nav></header><header class="docs-navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><div class="navbar-left"><a href="/docs/en/latest/" class="home-link is-hidden-mobile router-link-active">Documentation </a><a href="/docs/en/latest/" class="home-link is-hidden-tablet router-link-active"><img loading="lazy" src="/docs/docs-assets/img/logo-hstreamdb.5dbc865d.png" alt="HStreamDB: The streaming database built for IoT data storage and real-time analytics" class="logo" style="height:40px;max-width:unset"></a></div><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="navbar-algolia-input" class="search-query"></form><div class="links"><nav class="nav-links can-hide"><div class="nav-item"><a href="https://hstreamdb/docs/en/latest/" target="_self" class="nav-link external">Docs</a></div><div class="nav-item"><a href="https://hstream.io/blog" target="_self" class="nav-link external">Blog</a></div><div class="nav-item"><a href="https://hstream.io/community" target="_self" class="nav-link external">Community</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Company" class="dropdown-title"><span class="title">Company</span> <span class="arrow down"></span></button> <button type="button" aria-label="Company" class="mobile-dropdown-title"><span class="title">Company</span> <span class="arrow right"></span></button><ul class="nav-dropdown" style="display:none"><li class="dropdown-item"><a href="https://www.emqx.com/en/about" target="_blank" rel="noopener noreferrer" class="nav-link external">About Us</a></li><li class="dropdown-item"><a href="https://www.emqx.com/en/news" target="_blank" rel="noopener noreferrer" class="nav-link external">Newsroom</a></li><li class="dropdown-item"><a href="https://www.emqx.com/en/contact?product=hstreamdb" target="_blank" rel="noopener noreferrer" class="nav-link external">Contact Us</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Languages" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button><ul class="nav-dropdown" style="display:none"><li class="dropdown-item"><a href="/docs/en/latest/" class="nav-link router-link-active">English</a></li><li class="dropdown-item"><a href="/docs/zh/latest/" class="nav-link">中文</a></li></ul></div></div><div class="social-media is-align-items-center"><a href="https://discord.gg/2fEsuvzYqc" target="_blank" rel="noopener noreferrer nofollow" class="nav-item"><svg aria-hidden="true" class="icon"><use xlink:href="#icon-discord"></use></svg> Discord </a><a href="https://www.youtube.com/channel/UCI68yu7z2rDf7TkHMgxtukQ" target="_blank" rel="noopener noreferrer nofollow" class="nav-item"><svg aria-hidden="true" class="icon"><use xlink:href="#icon-youtube"></use></svg> YouTube </a><a href="https://github.com/hstreamdb/hstream" target="_blank" rel="noopener noreferrer nofollow" class="nav-item"><svg aria-hidden="true" class="icon"><use xlink:href="#icon-github"></use></svg> GitHub</a></div></nav></div></header><div class="sidebar-mask"></div><section class="main-box"><div class="columns is-mobile is-gapless"><aside class="left-column sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://hstreamdb/docs/en/latest/" target="_self" class="nav-link external">Docs</a></div><div class="nav-item"><a href="https://hstream.io/blog" target="_self" class="nav-link external">Blog</a></div><div class="nav-item"><a href="https://hstream.io/community" target="_self" class="nav-link external">Community</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Company" class="dropdown-title"><span class="title">Company</span> <span class="arrow down"></span></button> <button type="button" aria-label="Company" class="mobile-dropdown-title"><span class="title">Company</span> <span class="arrow right"></span></button><ul class="nav-dropdown" style="display:none"><li class="dropdown-item"><a href="https://www.emqx.com/en/about" target="_blank" rel="noopener noreferrer" class="nav-link external">About Us</a></li><li class="dropdown-item"><a href="https://www.emqx.com/en/news" target="_blank" rel="noopener noreferrer" class="nav-link external">Newsroom</a></li><li class="dropdown-item"><a href="https://www.emqx.com/en/contact?product=hstreamdb" target="_blank" rel="noopener noreferrer" class="nav-link external">Contact Us</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Languages" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button><ul class="nav-dropdown" style="display:none"><li class="dropdown-item"><a href="/docs/en/latest/" class="nav-link router-link-active">English</a></li><li class="dropdown-item"><a href="/docs/zh/latest/" class="nav-link">中文</a></li></ul></div></div><div class="social-media is-align-items-center"><a href="https://discord.gg/2fEsuvzYqc" target="_blank" rel="noopener noreferrer nofollow" class="nav-item"><svg aria-hidden="true" class="icon"><use xlink:href="#icon-discord"></use></svg> Discord </a><a href="https://www.youtube.com/channel/UCI68yu7z2rDf7TkHMgxtukQ" target="_blank" rel="noopener noreferrer nofollow" class="nav-item"><svg aria-hidden="true" class="icon"><use xlink:href="#icon-youtube"></use></svg> YouTube </a><a href="https://github.com/hstreamdb/hstream" target="_blank" rel="noopener noreferrer nofollow" class="nav-item"><svg aria-hidden="true" class="icon"><use xlink:href="#icon-github"></use></svg> GitHub</a></div></nav><div class="version-pick"><div class="dropdown-wrapper"><button type="button" aria-label="Languages" class="dropdown-title is-flex is-align-items-center is-justify-content-space-between"><span class="title">latest </span><span class="arrow down"></span></button></div></div><ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Overview</span> <span class="arrow right"></span></p></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Getting started</span> <span class="arrow right"></span></p></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Concepts</span> <span class="arrow right"></span></p></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Guides</span> <span class="arrow right"></span></p></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Deployment</span> <span class="arrow down"></span></p><ul class="sidebar-links sidebar-group-items"><li><a href="/docs/en/latest/deployment/deploy-k8s.html" class="sidebar-link">Running on Kubernetes</a></li><li><a href="/docs/en/latest/deployment/deploy-docker.html" class="sidebar-link">Manual Deployment with Docker</a></li><li><a href="/docs/en/latest/deployment/quick-deploy-ssh.html" class="sidebar-link">Quick Deployment with Docker and SSH</a></li><li><a href="/docs/en/latest/deployment/deploy-terraform.html" aria-current="page" class="active sidebar-link">Deploy HStream with Terraform</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/en/latest/deployment/deploy-terraform.html#find-the-provider" class="sidebar-link">Find The Provider</a></li><li class="sidebar-sub-header"><a href="/docs/en/latest/deployment/deploy-terraform.html#set-up-the-server-resources" class="sidebar-link">Set Up the Server Resources</a></li><li class="sidebar-sub-header"><a href="/docs/en/latest/deployment/deploy-terraform.html#deployment-with-terraform-cli" class="sidebar-link">Deployment with Terraform CLI</a></li></ul></li></ul></section></li><li><a href="/docs/en/latest/admin/admin.html" class="sidebar-link">HStream Admin</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Security</span> <span class="arrow right"></span></p></section></li><li><a href="/docs/en/latest/metrics/hstream-metrics.html" class="sidebar-link">HStream Metrics</a></li><li><a href="/docs/en/latest/release_notes/HStreamDB.html" class="sidebar-link">Release notes</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Reference</span> <span class="arrow right"></span></p></section></li></ul></aside><div class="column"><div class="columns is-mobile is-gapless"><div class="column col-page"><main class="page"><div id="loader-wrapper" style="display:none" data-v-78d8edea><div class="loader" data-v-78d8edea><div class="ball-spin-fade-loader" data-v-78d8edea><div data-v-78d8edea></div><div data-v-78d8edea></div><div data-v-78d8edea></div><div data-v-78d8edea></div><div data-v-78d8edea></div><div data-v-78d8edea></div><div data-v-78d8edea></div><div data-v-78d8edea></div></div></div></div><div class="theme-default-content reset-width content__default"><h1 id="deploy-hstream-with-terraform"><a href="#deploy-hstream-with-terraform" class="header-anchor">#</a> Deploy HStream with Terraform</h1><p>This document describes how to deploy HStream with Terraform on a cloud platform that supports <a href="https://www.terraform.io/language/providers" target="_blank" rel="noopener noreferrer">Terraform provider<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. This process is based on the method provided in <a href="/docs/en/latest/deployment/quick-deploy-ssh.html">Quick Deployment with Docker and SSH</a>.</p><h2 id="find-the-provider"><a href="#find-the-provider" class="header-anchor">#</a> Find The Provider</h2><p>Terraform organise and deploy/destroy server resources in terms of declarative configuration files, which relies on plugins called &quot;providers&quot; to interact with cloud providers, SaaS providers, and other APIs.</p><p>Common providers can be found in the <a href="https://registry.terraform.io/browse/providers" target="_blank" rel="noopener noreferrer">Terraform Register<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. In this document, we are going to use the <a href="https://www.huaweicloud.com" target="_blank" rel="noopener noreferrer">Huawei Cloud<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> provider to deploy HStream as an example.</p><p>You can check here for more information about the Huawei Cloud provider:</p><ul><li>the <a href="https://github.com/huaweicloud/terraform-provider-huaweicloud" target="_blank" rel="noopener noreferrer">GitHub repository<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li>the <a href="https://registry.terraform.io/providers/huaweicloud/huaweicloud/latest/docs" target="_blank" rel="noopener noreferrer">Terraform Register documentation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul><h2 id="set-up-the-server-resources"><a href="#set-up-the-server-resources" class="header-anchor">#</a> Set Up the Server Resources</h2><p>We are going to introduce a few steps to show how to deploy HStream with Terraform.</p><h3 id="set-up-basic-constants"><a href="#set-up-basic-constants" class="header-anchor">#</a> Set Up basic constants</h3><p>Terraform expressed infrastructure as code in the HCL language. It's useful to set some variables for us to refer to in the following development.</p><p>Firstly, create a file named <code>terraform.tfvars</code>. An example would be like:</p><div class="language-hcl line-numbers-mode"><pre class="language-hcl"><code><span class="token comment"># See https://developer.huaweicloud.com/en-us/endpoint</span>
<span class="token comment"># https://support.huaweicloud.com/intl/en-us/api-eip/eip_api_0003.html</span>
<span class="token property">region</span>              <span class="token punctuation">=</span> <span class="token string">&quot;cn-southwest-2&quot;</span>
<span class="token property">region_network_type</span> <span class="token punctuation">=</span> <span class="token string">&quot;5_sbgp&quot;</span>

<span class="token comment"># See https://support.huaweicloud.com/intl/en-us/productdesc-evs/en-us_topic_0014580744.html</span>
<span class="token property">data_disk_type</span> <span class="token punctuation">=</span> <span class="token string">&quot;SSD&quot;</span>
<span class="token comment"># Int, GiB, 10..32768</span>
<span class="token property">data_disk_sizes</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;hadmin&quot;</span>    <span class="token punctuation">=</span> <span class="token number">40</span>
  <span class="token property">&quot;zookeeper&quot;</span> <span class="token punctuation">=</span> <span class="token number">40</span>
  <span class="token property">&quot;hstore&quot;</span>    <span class="token punctuation">=</span> <span class="token number">40</span>
  <span class="token property">&quot;hserver&quot;</span>   <span class="token punctuation">=</span> <span class="token number">40</span>
<span class="token punctuation">}</span>

<span class="token property">num_instances</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;hadmin&quot;</span>    <span class="token punctuation">=</span> <span class="token number">1</span>
  <span class="token property">&quot;zookeeper&quot;</span> <span class="token punctuation">=</span> <span class="token number">3</span>
  <span class="token property">&quot;hstore&quot;</span>    <span class="token punctuation">=</span> <span class="token number">3</span>
  <span class="token property">&quot;hserver&quot;</span>   <span class="token punctuation">=</span> <span class="token number">3</span>
<span class="token punctuation">}</span>

<span class="token property">image_name</span>    <span class="token punctuation">=</span> <span class="token string">&quot;Ubuntu 20.04 server 64bit&quot;</span>
<span class="token property">flavor_name</span>   <span class="token punctuation">=</span> <span class="token string">&quot;s6.small.1&quot;</span>
<span class="token property">key_pair_name</span> <span class="token punctuation">=</span> <span class="token string">&quot;your key pair name goes here&quot;</span>

<span class="token property">network_uuid</span> <span class="token punctuation">=</span> <span class="token string">&quot;your network UUID goes here&quot;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>The syntax for <code>num_instances</code> defines a map in the HCL language. The value can be accessed by key in the following form <code>num_instances[&quot;hserver&quot;]</code>.</p><p>The variables here are just for example usage, feel free to set, add or remove one or more of them. There are no restrictions on the contents of variables here such as <code>data_disk_sizes</code> , <code>num_instances</code>, <code>image_name</code> and so on as long as they are valid.</p><h3 id="set-up-ecs-instance"><a href="#set-up-ecs-instance" class="header-anchor">#</a> Set Up ECS instance</h3><p>We use the <code>resource</code> block to declare what compute resource we would like to have. An example would be like:</p><div class="language-hcl line-numbers-mode"><pre class="language-hcl"><code><span class="token keyword">resource <span class="token type variable">&quot;huaweicloud_compute_instance&quot;</span></span> <span class="token string">&quot;hstore&quot;</span> <span class="token punctuation">{</span>
  <span class="token property">count</span> <span class="token punctuation">=</span> var.num_instances<span class="token punctuation">[</span><span class="token string">&quot;hstore&quot;</span><span class="token punctuation">]</span>

  <span class="token property">name</span>        <span class="token punctuation">=</span> <span class="token string">&quot;hstore-<span class="token interpolation"><span class="token punctuation">$</span><span class="token punctuation">{</span><span class="token keyword">count</span><span class="token punctuation">.</span><span class="token type variable">index</span><span class="token punctuation">}</span></span>&quot;</span>
  <span class="token property">image_name</span>  <span class="token punctuation">=</span> var.image_name
  <span class="token property">flavor_name</span> <span class="token punctuation">=</span> var.flavor_name
  <span class="token property">key_pair</span>    <span class="token punctuation">=</span> var.key_pair_name

  <span class="token keyword">network</span> <span class="token punctuation">{</span>
    <span class="token property">access_network</span> <span class="token punctuation">=</span> <span class="token boolean">true</span>
    <span class="token property">uuid</span>           <span class="token punctuation">=</span> var.network_uuid
  <span class="token punctuation">}</span>

  <span class="token keyword">data_disks</span> <span class="token punctuation">{</span>
    <span class="token property">type</span> <span class="token punctuation">=</span> var.data_disk_type
    <span class="token property">size</span> <span class="token punctuation">=</span> var.data_disk_sizes<span class="token punctuation">[</span><span class="token string">&quot;hstore&quot;</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>(the documentation of <code>huaweicloud_compute_instance</code> can be found <a href="https://registry.terraform.io/providers/huaweicloud/huaweicloud/latest/docs/resources/compute_instance" target="_blank" rel="noopener noreferrer">here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>)</p><p>The resource block declares a list (by <code>count</code>) of ECS instances each can be accessed by its name and index, for example, <code>huaweicloud_compute_instance.hstore[n]</code> (where <code>n</code> stands for arbitrary number not out of bounds, an int variable, or the <code>*</code> to select all).</p><p>This fragment of code should be put in an HCL file, let us call it <code>main.tf</code> and save it to the Terraform project root (that is, the folder that contains your previously defined <code>terraform.tfvars</code> file) for convention and convenience. Before we put the resource block in, two extra dependencies should be added first.</p><p>Firstly, we declare every variable we would like to refer to in the previously defined <code>terraform.tfvars</code> file, using the following syntax.</p><div class="language-hcl line-numbers-mode"><pre class="language-hcl"><code><span class="token keyword">variable<span class="token type variable"> &quot;data_disk_sizes&quot; </span></span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">variable<span class="token type variable"> &quot;num_instances&quot; </span></span><span class="token punctuation">{</span>
  <span class="token property">type</span> <span class="token punctuation">=</span> map(string)
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Secondly, we introduce the provider which would be used.</p><div class="language-hcl line-numbers-mode"><pre class="language-hcl"><code><span class="token keyword">terraform</span> <span class="token punctuation">{</span>
  <span class="token keyword">required_providers</span> <span class="token punctuation">{</span>
    <span class="token property">huaweicloud</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span>
      <span class="token property">source</span>  <span class="token punctuation">=</span> <span class="token string">&quot;huaweicloud/huaweicloud&quot;</span>
      <span class="token property">version</span> <span class="token punctuation">=</span> <span class="token string">&quot;~&gt; 1.33.0&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">provider<span class="token type variable"> &quot;huaweicloud&quot; </span></span><span class="token punctuation">{</span>
  <span class="token property">region</span> <span class="token punctuation">=</span> var.region
  <span class="token comment"># setting `access_key` and `secret_key` via environment</span>
  <span class="token comment"># variables `HW_ACCESS_KEY` and `HW_SECRET_KEY`</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>(the latest version can be found in the <a href="https://registry.terraform.io/providers/huaweicloud/huaweicloud/latest/docs" target="_blank" rel="noopener noreferrer">Terraform Register documentation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> of Huawei Cloud)</p><h3 id="set-up-network"><a href="#set-up-network" class="header-anchor">#</a> Set Up Network</h3><p>The deployment method provided in <a href="/docs/en/latest/deployment/quick-deploy-ssh.html">Quick Deployment with Docker and SSH</a> needs SSH access to remote servers, which needs each server to have accessible (public) IP addresses.</p><p>The ECS instances of Huawei Cloud do not provide public IP addresses by default. Another service, Elastic IP is invoked to serve as a purpose for associating ECS instance to a newly created (or already existing) EIP. The following code fragment demonstrates a way to create a list of EIPs, then associate them for each instance respectively.</p><div class="language-hcl line-numbers-mode"><pre class="language-hcl"><code><span class="token keyword">resource <span class="token type variable">&quot;huaweicloud_vpc_eip&quot;</span></span> <span class="token string">&quot;hserver_eip&quot;</span> <span class="token punctuation">{</span>
  <span class="token property">count</span> <span class="token punctuation">=</span> var.num_instances<span class="token punctuation">[</span><span class="token string">&quot;hserver&quot;</span><span class="token punctuation">]</span>

  <span class="token keyword">publicip</span> <span class="token punctuation">{</span>
    <span class="token property">type</span> <span class="token punctuation">=</span> var.region_network_type
  <span class="token punctuation">}</span>

  <span class="token keyword">bandwidth</span> <span class="token punctuation">{</span>
    <span class="token property">name</span>        <span class="token punctuation">=</span> <span class="token string">&quot;hserver-network-<span class="token interpolation"><span class="token punctuation">$</span><span class="token punctuation">{</span><span class="token keyword">count</span><span class="token punctuation">.</span><span class="token type variable">index</span><span class="token punctuation">}</span></span>&quot;</span>
    <span class="token property">size</span>        <span class="token punctuation">=</span> <span class="token number">100</span>
    <span class="token property">share_type</span>  <span class="token punctuation">=</span> <span class="token string">&quot;PER&quot;</span>
    <span class="token property">charge_mode</span> <span class="token punctuation">=</span> <span class="token string">&quot;traffic&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">resource <span class="token type variable">&quot;huaweicloud_compute_eip_associate&quot;</span></span> <span class="token string">&quot;hserver_associated&quot;</span> <span class="token punctuation">{</span>
  <span class="token property">count</span> <span class="token punctuation">=</span> var.num_instances<span class="token punctuation">[</span><span class="token string">&quot;hserver&quot;</span><span class="token punctuation">]</span>

  <span class="token property">public_ip</span>   <span class="token punctuation">=</span> huaweicloud_vpc_eip.hserver_eip<span class="token punctuation">[</span>count.index<span class="token punctuation">]</span>.address
  <span class="token property">instance_id</span> <span class="token punctuation">=</span> huaweicloud_compute_instance.hserver<span class="token punctuation">[</span>count.index<span class="token punctuation">]</span>.id
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>The <code>output</code> block is useful to observe the result that applying a Terraform plan would yield. In this case, we are going to inspect the public IP which can be used for establishing SSH connections.</p><div class="language-hcl line-numbers-mode"><pre class="language-hcl"><code><span class="token keyword">output<span class="token type variable"> &quot;hservers_access_ip&quot; </span></span><span class="token punctuation">{</span>
  <span class="token property">value</span> <span class="token punctuation">=</span> huaweicloud_compute_instance.hserver<span class="token punctuation">[</span>*<span class="token punctuation">]</span>.public_ip
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="set-up-package-dependency"><a href="#set-up-package-dependency" class="header-anchor">#</a> Set Up Package Dependency</h3><p>Deploy HStream with Terraform needs <a href="https://docs.docker.com/" target="_blank" rel="noopener noreferrer">Docker<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to be installed on ECS instances. Install instructions can be found <a href="https://docs.docker.com/engine/install/centos/" target="_blank" rel="noopener noreferrer">here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> (<a href="https://docs.docker.com/engine/install/ubuntu/" target="_blank" rel="noopener noreferrer">here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for Ubuntu).</p><h2 id="deployment-with-terraform-cli"><a href="#deployment-with-terraform-cli" class="header-anchor">#</a> Deployment with Terraform CLI</h2><p>As we had already declared what server resources do we want to have to deploy an HStream cluster in the HCL file. The next step is to check whether these declarations are desirable for our purpose. Run this command in the Terraform HCL project root:</p><div class="language-shell line-numbers-mode"><pre class="language-shell"><code>terraform plan
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Once the HCL script for needed server resources are properly set, you can run <code>terraform plan</code> to see what changes that Terraform <a href="https://www.terraform.io/cli/commands/plan" target="_blank" rel="noopener noreferrer">plans<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to make to your infrastructure. This command needs an installed Terraform executable on your PATH, adds on the Huawei Cloud access key and secret key can be found by the provider (i.e. via environment variables or configuration in the provider block).</p><p>Then it would print something like (if running successfully):</p><div class="language- line-numbers-mode"><pre class="language-text"><code>Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:
  + create

Terraform will perform the following actions:

  # huaweicloud_compute_eip_associate.hadmin_associated[0] will be created
  + resource &quot;huaweicloud_compute_eip_associate&quot; &quot;hadmin_associated&quot; {
      + fixed_ip    = (known after apply)
      + id          = (known after apply)
      + instance_id = (known after apply)
      + port_id     = (known after apply)
      + public_ip   = (known after apply)
      + region      = (known after apply)
    }

...... ......

Plan: 12 to add, 0 to change, 0 to destroy.

Changes to Outputs:
  + hadmin_access_ip    = [
      + (known after apply),
    ]
  + hadmin_public_ip    = [
      + (known after apply),
    ]

...... ......

─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

Note: You didn't use the -out option to save this plan, so Terraform can't guarantee to take exactly these actions if you run &quot;terraform apply&quot; now.
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><p>After previewing and checking whether the proposed changes match what you expected, you can turn to modify the configuration or apply these changes. Apply these changes using another <a href="https://www.terraform.io/cli/commands/apply" target="_blank" rel="noopener noreferrer">command<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, <code>terraform apply</code>. The output would be similar to the above one, plus:</p><div class="language- line-numbers-mode"><pre class="language-text"><code>Do you want to perform these actions?
  Terraform will perform the actions described above.
  Only 'yes' will be accepted to approve.

  Enter a value:
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>After applying the plan, Terraform would produce some output. To inspect them, run:</p><div class="language-shell line-numbers-mode"><pre class="language-shell"><code>terraform output
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>which yields:</p><div class="language- line-numbers-mode"><pre class="language-text"><code>Outputs:

hadmin_access_ip = [
  &quot;192.168.0.64&quot;,
]
hadmin_public_ip = [
  tostring(null),
]
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>Using the HCL <code>output</code> block makes configuring HStream cluster easier. It is necessary to obtain public IP addresses and access IP address, which is in the fields <code>public_ip</code> and <code>access_ip_v4</code> of each compute instance. Note that if you are binding EIPs to ECSs after creating each instance (like what we had done above), to yield the right <code>public_ip</code> you must do <code>terraform refresh</code> before <code>terraform output</code>.</p><div class="language- line-numbers-mode"><pre class="language-text"><code>Outputs:

hadmin_access_ip = [
  &quot;192.168.0.64&quot;,
]
hadmin_public_ip = [
  &quot;1**.6*.1**.1**&quot;,
]
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>The <a href="https://www.terraform.io/cli/commands/output" target="_blank" rel="noopener noreferrer">command<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <code>terraform output -json</code> displays output in JSON, which is easily interactive with command-line tools like <code>jq</code>.</p><div class="language-shell line-numbers-mode"><pre class="language-shell"><code>terraform output -json <span class="token operator">|</span> jq <span class="token builtin class-name">.</span><span class="token string">'zookeeper_access_ip.value'</span>
<span class="token punctuation">[</span>
  <span class="token string">&quot;192.168.0.149&quot;</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>After all needed <code>public_ip</code>s and <code>access_ip_v4</code>s are yielded, you can use them to configure the HStream cluster configuration and deploy it with created server resources. You can refer to <a href="/docs/en/latest/deployment/quick-deploy-ssh.html">Quick Deployment with Docker and SSH</a> for more details.</p><p>Terraform also provides a command for deleting the resources created according to the TCL file, run:</p><div class="language-shell line-numbers-mode"><pre class="language-shell"><code>terraform apply -destroy
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>(noted that at this time, 2020/2/25, Huawei Cloud would not delete the disks created by creating compute instances when applying this command).</p></div><div class="page-nav reset-width"><p class="inner"><span class="prev">← <a href="/docs/en/latest/deployment/quick-deploy-ssh.html" class="prev">Quick Deployment with Docker and SSH </a></span><span class="next"><a href="/docs/en/latest/admin/admin.html">HStream Admin </a>→</span></p></div></main></div><div class="right-column"><div class="docs-operation"><div class="doc-download improve-doc"><a href="https://github.com/hstreamdb/docs/edit/latest/docs/en/deployment/deploy-terraform.md" target="_blank" rel="noreferrer" class="improve-doc">Edit this page</a></div><div class="doc-download feedback-doc"><a href="https://github.com/hstreamdb/docs/issues/new?body=File:%20[/docs/en/deployment/deploy-terraform.md](https://hstream.io/docs/en/latest/deployment/deploy-terraform.html)" target="_blank" rel="noreferrer">Request docs changes</a></div></div><section class="doc-toc"><div class="title">What’s on this page</div><div class="toc-content"><ul><li><a href="/docs/en/latest/deployment/deploy-terraform.html#find-the-provider">Find The Provider</a></li><li><a href="/docs/en/latest/deployment/deploy-terraform.html#set-up-the-server-resources">Set Up the Server Resources</a></li><li><a href="/docs/en/latest/deployment/deploy-terraform.html#deployment-with-terraform-cli">Deployment with Terraform CLI</a></li></ul></div></section></div></div><footer id="app-footer"><div class="container has-text-centered-touch"><div class="footer-hstreamdb"><div class="columns is-vcentered is-multiline is-justify-content-space-between"><div class="column is-12-touch is-3-desktop"><a href="https://hstream.io"><img loading="lazy" src="/docs/docs-assets/img/logo-hstreamdb.5dbc865d.png" alt="HStreamDB: The streaming database built for IoT data storage and real-time analytics" height="40"></a></div><div class="column is-12-touch is-4-desktop"><ul class="follow-us is-flex is-flex-wrap-wrap"><li><a href="https://github.com/hstreamdb/hstream" target="_blank" rel="noopener noreferrer nofollow" class="is-flex is-align-items-center is-justify-content-center is-trans-top"><div><svg aria-hidden="true" class="icon"><use xlink:href="#icon-github"></use></svg></div></a></li><li><a href="https://twitter.com/HStreamDB/" target="_blank" rel="noopener noreferrer nofollow" class="is-flex is-align-items-center is-justify-content-center is-trans-top"><div><svg aria-hidden="true" class="icon"><use xlink:href="#icon-twitter"></use></svg></div></a></li><li><a href="https://www.youtube.com/channel/UCI68yu7z2rDf7TkHMgxtukQ" target="_blank" rel="noopener noreferrer nofollow" class="is-flex is-align-items-center is-justify-content-center is-trans-top"><div><svg aria-hidden="true" class="icon"><use xlink:href="#icon-youtube"></use></svg></div></a></li><li><a href="https://www.linkedin.com/company/emqtech" target="_blank" rel="noopener noreferrer nofollow" class="is-flex is-align-items-center is-justify-content-center is-trans-top"><div><svg aria-hidden="true" class="icon"><use xlink:href="#icon-linkedin"></use></svg></div></a></li></ul></div></div><div class="hr"></div><div class="columns is-multiline"><div class="column is-12-touch is-8-desktop"><div class="columns is-multiline"><div class="column is-12-touch is-4-desktop"><h4 class="mb-3 is-size-6 is-text-normal">Docs</h4><ul class="nav-list"><li><a href="https://hstream.io/docs/en/latest/start/quickstart-with-docker.html" target="_blank" rel="noopener" class="is-text-normal hover:is-text-primary">Quick Start</a></li><li><a href="https://hstream.io/docs/en/latest/client_api/java-sdk/installation.html" target="_blank" rel="noopener" class="is-text-normal hover:is-text-primary">Java SDK</a></li><li><a href="https://hstream.io/docs/en/latest/deployment/deploy-k8s.html" target="_blank" rel="noopener" class="is-text-normal hover:is-text-primary">Deployment</a></li></ul></div><div class="column is-12-touch is-4-desktop"><h4 class="mb-3 is-size-6 is-text-normal">Platform</h4><ul class="nav-list"><li><a href="https://hstream.io/blog" target="_self" rel="noopener" class="is-text-normal hover:is-text-primary">Blog</a></li><li><a href="https://hstream.io/community" target="_self" rel="noopener" class="is-text-normal hover:is-text-primary">Community</a></li><li><a href="https://www.emqx.com/en/try?product=hstreamdb" target="_blank" rel="noopener" class="is-text-normal hover:is-text-primary">Download</a></li></ul></div><div class="column is-12-touch is-4-desktop"><h4 class="mb-3 is-size-6 is-text-normal">Company</h4><ul class="nav-list"><li><a href="https://www.emqx.com/en/about" target="_blank" rel="noopener" class="is-text-normal hover:is-text-primary">About Us</a></li><li><a href="https://www.emqx.com/en/news" target="_blank" rel="noopener" class="is-text-normal hover:is-text-primary">Newsroom</a></li><li><a href="https://www.emqx.com/en/contact?product=hstreamdb" target="_blank" rel="noopener" class="is-text-normal hover:is-text-primary">Contact Us</a></li></ul></div></div></div><div class="column is-12-touch is-4-desktop"><h3 class="mb-4 is-size-6">Subscribe to Our Newsletters</h3><div class="form-mail is-relative"><input type="email" placeholder="Email" value=""> <button class="button is-gradient py-1 px-4">Subscribe</button><p class="sub-tips my-0 is-size-14 has-text-weight-medium"></p></div><p class="copyright has-text-weight-medium my-0">© 2022 <a href="https://www.emqx.com/en" target="_blank" rel="noopener">EMQ</a> Technologies Co., Ltd. All rights reserved</p></div></div></div></div></footer></div></div></section><div id="page-feedback" data-v-fa621f20><div class="feedback-button is-flex is-align-items-center is-justify-content-center" data-v-fa621f20><svg aria-hidden="true" class="icon" data-v-fa621f20><use xlink:href="#icon-useful" data-v-fa621f20></use></svg></div><div class="feedback-form" style="display:none" data-v-fa621f20 data-v-fa621f20><div class="feedback-header pl-4 is-flex is-align-items-center is-justify-content-space-between" data-v-fa621f20>Was this page useful?<div class="icon-close p-4" style="cursor:pointer" data-v-fa621f20>x</div></div><div class="feedback-body p-4" data-v-fa621f20><div class="is-flex" data-v-fa621f20 data-v-67fd37ab data-v-fa621f20><div class="feedback-button like mr-5 is-flex is-align-items-center is-justify-content-center" data-v-fa621f20><svg aria-hidden="true" class="icon" data-v-fa621f20><use xlink:href="#icon-useful" data-v-fa621f20></use></svg></div><div class="feedback-button dislike is-flex is-align-items-center is-justify-content-center" data-v-fa621f20><svg aria-hidden="true" class="icon" data-v-fa621f20><use xlink:href="#icon-a-notuseful" data-v-fa621f20></use></svg></div></div></div></div></div></div><div class="global-ui"></div></div><script src="/docs/docs-assets/js/app.7c12bc3f.js" defer="defer"></script><script src="/docs/docs-assets/js/3.a9baf225.js" defer="defer"></script><script src="/docs/docs-assets/js/24.1d642bb2.js" defer="defer"></script></body></html>