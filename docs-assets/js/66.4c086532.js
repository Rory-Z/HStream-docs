(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{524:function(s,a,t){"use strict";t.r(a);var n=t(10),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"使用-terraform-部署-hstream"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用-terraform-部署-hstream"}},[s._v("#")]),s._v(" 使用 Terraform 部署 HStream")]),s._v(" "),t("p",[s._v("本文档描述了如何在支持 "),t("a",{attrs:{href:"https://www.terraform.io/language/providers",target:"_blank",rel:"noopener noreferrer"}},[s._v("Terraform 提供者"),t("OutboundLink")],1),s._v("的云平台上部署 HStream。\n此流程主要基于文档"),t("RouterLink",{attrs:{to:"/zh/latest/deployment/quick-deploy-ssh.html"}},[s._v("使用 Docker 和 SSH 快速部署")]),s._v("中所提供的部署方法。")],1),s._v(" "),t("h2",{attrs:{id:"寻找所需的-terraform-提供者"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#寻找所需的-terraform-提供者"}},[s._v("#")]),s._v(" 寻找所需的 Terraform 提供者")]),s._v(" "),t("p",[s._v("Terraform 根据声明性的配置文件组织和部署和销毁服务器资源，\n这些文件依赖于称为 “提供者” 的插件来与云提供商、SaaS 提供商或其它 API 进行交互。")]),s._v(" "),t("p",[s._v("常见的提供者可以在 "),t("a",{attrs:{href:"https://registry.terraform.io/browse/providers",target:"_blank",rel:"noopener noreferrer"}},[s._v("Terraform Register"),t("OutboundLink")],1),s._v(" 中找到。\n在本文档中，我们将使以用"),t("a",{attrs:{href:"https://www.huaweicloud.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("华为云"),t("OutboundLink")],1),s._v("部署 HStream 为例。")]),s._v(" "),t("p",[s._v("可以在此处查看有关华为云 Terraform 提供者的更多信息：")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://github.com/huaweicloud/terraform-provider-huaweicloud",target:"_blank",rel:"noopener noreferrer"}},[s._v("GitHub 仓库"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("a",{attrs:{href:"https://registry.terraform.io/providers/huaweicloud/huaweicloud/latest/docs",target:"_blank",rel:"noopener noreferrer"}},[s._v("Terraform Register 文档"),t("OutboundLink")],1)])]),s._v(" "),t("h2",{attrs:{id:"配置服务器资源"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置服务器资源"}},[s._v("#")]),s._v(" 配置服务器资源")]),s._v(" "),t("p",[s._v("我们将介绍几个步骤来展示如何使用 Terraform 部署 HStream。")]),s._v(" "),t("h3",{attrs:{id:"配置基本常量"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置基本常量"}},[s._v("#")]),s._v(" 配置基本常量")]),s._v(" "),t("p",[s._v("Terraform 将云资源基础设施表示为 HCL 语言中的代码。\n设置一些变量供我们在后面的开发中参考是很有用的。")]),s._v(" "),t("p",[s._v("首先，创建一个名为 "),t("code",[s._v("terraform.tfvars")]),s._v(" 的文件。一个例子是：")]),s._v(" "),t("div",{staticClass:"language-hcl line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-hcl"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可参考 https://developer.huaweicloud.com/en-us/endpoint")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# https://support.huaweicloud.com/intl/en-us/api-eip/eip_api_0003.html")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("region")]),s._v("              "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cn-southwest-2"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("region_network_type")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"5_sbgp"')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可参考 https://support.huaweicloud.com/intl/en-us/productdesc-evs/en-us_topic_0014580744.html")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("data_disk_type")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"SSD"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Int, GiB, 10..32768")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("data_disk_sizes")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"hadmin"')]),s._v("    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("40")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"zookeeper"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("40")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"hstore"')]),s._v("    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("40")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"hserver"')]),s._v("   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("40")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("num_instances")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"hadmin"')]),s._v("    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"zookeeper"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"hstore"')]),s._v("    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"hserver"')]),s._v("   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("image_name")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Ubuntu 20.04 server 64bit"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("flavor_name")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"s6.small.1"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("key_pair_name")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"your key pair name goes here"')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("network_uuid")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"your network UUID goes here"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br")])]),t("p",[s._v("像以上定义 "),t("code",[s._v("num_instances")]),s._v(" 这样的语法在 HCL 语言中定义了一个 "),t("code",[s._v("map")]),s._v("。\n容器 "),t("code",[s._v("map")]),s._v(" 中可用这样的语法来索引键所对应的值："),t("code",[s._v('num_instances["hserver"]')]),s._v("。")]),s._v(" "),t("p",[s._v("这里所设定的变量仅作为示例使用，可以任意添加或删除这些变量中的一个或多个；\n此处没有对这些变量所设定的值做出任何限制，只要它们是合法的值即可。")]),s._v(" "),t("h3",{attrs:{id:"配置-ecs-实例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置-ecs-实例"}},[s._v("#")]),s._v(" 配置 ECS 实例")]),s._v(" "),t("p",[s._v("可以通过设置 "),t("code",[s._v("resource")]),s._v(" 语句块来声明我们部署所需要的计算资源。一个例子是：")]),s._v(" "),t("div",{staticClass:"language-hcl line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-hcl"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("resource "),t("span",{pre:!0,attrs:{class:"token type variable"}},[s._v('"huaweicloud_compute_instance"')])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hstore"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("count")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" var.num_instances"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hstore"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("name")]),s._v("        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hstore-'),t("span",{pre:!0,attrs:{class:"token interpolation"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("$")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("count")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token type variable"}},[s._v("index")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")])]),s._v('"')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("image_name")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" var.image_name\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("flavor_name")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" var.flavor_name\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("key_pair")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" var.key_pair_name\n\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("network")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("access_network")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("uuid")]),s._v("           "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" var.network_uuid\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("data_disks")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("type")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" var.data_disk_type\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("size")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" var.data_disk_sizes"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hstore"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br")])]),t("p",[s._v("（在"),t("a",{attrs:{href:"https://registry.terraform.io/providers/huaweicloud/huaweicloud/latest/docs/resources/compute_instance",target:"_blank",rel:"noopener noreferrer"}},[s._v("这里"),t("OutboundLink")],1),s._v("可以找到 "),t("code",[s._v("huaweicloud_compute_instance")]),s._v(" 的文档）")]),s._v(" "),t("p",[s._v("上述的 "),t("code",[s._v("resource")]),s._v(" 语句块声明了一列表的 ECS 实例，可以通过列表名和下标来访问单个实例：\n例如使用类似 "),t("code",[s._v("huaweicloud_compute_instance.hstore[n]")]),s._v(" 的语法（在这里 "),t("code",[s._v("n")]),s._v(" 在不超出数量范围越界的情况下\n可以是任意数字字面量、"),t("code",[s._v("int")]),s._v(" 类型的变量，或者通过使用通配符 "),t("code",[s._v("*")]),s._v(" 来全选）。")]),s._v(" "),t("p",[s._v("按照惯例，将这部分代码片段写入一个名叫 "),t("code",[s._v("main.tf")]),s._v(" 的源文件，并且将其存到 Terraform 项目的根目录（也就是先前存放 "),t("code",[s._v("terraform.tfvars")]),s._v(" 文件时所创建的文件夹）。\n在写 "),t("code",[s._v("resource")]),s._v(" 语句块前，还需要添加两个依赖。")]),s._v(" "),t("p",[s._v("首先，需要声明"),t("strong",[s._v("每个")]),s._v("引用自 "),t("code",[s._v("terraform.tfvars")]),s._v(" 文件的变量：")]),s._v(" "),t("div",{staticClass:"language-hcl line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-hcl"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("variable"),t("span",{pre:!0,attrs:{class:"token type variable"}},[s._v(' "data_disk_sizes" ')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("variable"),t("span",{pre:!0,attrs:{class:"token type variable"}},[s._v(' "num_instances" ')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("type")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" map(string)\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("然后，引入并配置所使用的提供者依赖：")]),s._v(" "),t("div",{staticClass:"language-hcl line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-hcl"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("terraform")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("required_providers")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("huaweicloud")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("source")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"huaweicloud/huaweicloud"')]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("version")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"~> 1.33.0"')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("provider"),t("span",{pre:!0,attrs:{class:"token type variable"}},[s._v(' "huaweicloud" ')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("region")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" var.region\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可以使用通过分别设定 `HW_ACCESS_KEY` 与 `HW_SECRET_KEY` 环境变量")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 来配置此处的 `access_key` 和 `secret_key` 变量")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("p",[s._v("（可以在此处的 "),t("a",{attrs:{href:"https://registry.terraform.io/providers/huaweicloud/huaweicloud/latest/docs",target:"_blank",rel:"noopener noreferrer"}},[s._v("Terraform Register 文档"),t("OutboundLink")],1),s._v("中找到华为云提供者的最新版本信息）")]),s._v(" "),t("h3",{attrs:{id:"配置所需网络通信"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置所需网络通信"}},[s._v("#")]),s._v(" 配置所需网络通信")]),s._v(" "),t("p",[s._v("文档"),t("RouterLink",{attrs:{to:"/zh/latest/deployment/quick-deploy-ssh.html"}},[s._v("使用 Docker 和 SSH 快速部署")]),s._v("中所提供的部署方法需要我们能够通过 SSH 连接\n远程服务器，这需要远程服务器有可访问的公网 IP 并且暴露 SSH 所需的端口。")],1),s._v(" "),t("p",[s._v("在华为云上创建 ECS 实例默认不会提供可供访问的公网 IP。可以通过使用另外一项服务，弹性公网 IP（Elastic IP）来获取并绑定到新创建（或已经存在）的 ECS 实例上。下面的代码示范了如何创建一列表的弹性公网 IP，然后分别绑定\n到每台实例上：")]),s._v(" "),t("div",{staticClass:"language-hcl line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-hcl"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("resource "),t("span",{pre:!0,attrs:{class:"token type variable"}},[s._v('"huaweicloud_vpc_eip"')])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hserver_eip"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("count")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" var.num_instances"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hserver"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("publicip")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("type")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" var.region_network_type\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("bandwidth")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("name")]),s._v("        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hserver-network-'),t("span",{pre:!0,attrs:{class:"token interpolation"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("$")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("count")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token type variable"}},[s._v("index")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")])]),s._v('"')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("size")]),s._v("        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("share_type")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"PER"')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("charge_mode")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"traffic"')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("resource "),t("span",{pre:!0,attrs:{class:"token type variable"}},[s._v('"huaweicloud_compute_eip_associate"')])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hserver_associated"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("count")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" var.num_instances"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hserver"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("public_ip")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" huaweicloud_vpc_eip.hserver_eip"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("count.index"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(".address\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("instance_id")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" huaweicloud_compute_instance.hserver"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("count.index"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(".id\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br")])]),t("p",[s._v("上文所使用的 "),t("code",[s._v("output")]),s._v(" 语句块可以用来选择性地展示应用一个 Terraform 计划所得到的结果。由于我们需要通过 IP 地址来\n建立 SSH 连接，在这里使用它将其打印出来：")]),s._v(" "),t("div",{staticClass:"language-hcl line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-hcl"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("output"),t("span",{pre:!0,attrs:{class:"token type variable"}},[s._v(' "hservers_access_ip" ')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("value")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" huaweicloud_compute_instance.hserver"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("*"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(".public_ip\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h3",{attrs:{id:"配置所需的软件包依赖"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置所需的软件包依赖"}},[s._v("#")]),s._v(" 配置所需的软件包依赖")]),s._v(" "),t("p",[s._v("通过 Terraform 部署 HStream 需要在 ECS 实例上有安装好的 "),t("a",{attrs:{href:"https://docs.docker.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Docker"),t("OutboundLink")],1),s._v("。\n在"),t("a",{attrs:{href:"https://docs.docker.com/engine/install/centos/",target:"_blank",rel:"noopener noreferrer"}},[s._v("这里"),t("OutboundLink")],1),s._v("可以找到安装 Docker 有关的指引信息。\nUbuntu 用户可以参考（"),t("a",{attrs:{href:"https://docs.docker.com/engine/install/ubuntu/",target:"_blank",rel:"noopener noreferrer"}},[s._v("此处"),t("OutboundLink")],1),s._v("）的文档。")]),s._v(" "),t("h2",{attrs:{id:"deployment-with-terraform-cli"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#deployment-with-terraform-cli"}},[s._v("#")]),s._v(" Deployment with Terraform CLI")]),s._v(" "),t("p",[s._v("我们已经在 HCL 文件中声明好了我们想要部署 HStream 集群所需的服务器资源。下一步是检查这些声明是否符合我们的目的和预期。在 Terraform HCL 项目根目录中运行以下命令：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("terraform plan\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("在准备好创建服务器资源所需的 HCL 脚本后，可以通过运行命令 "),t("code",[s._v("terraform plan")]),s._v(" 来检查执行这一计划将要发生的\n的变化是否符合预期。执行这个命令需要在 "),t("code",[s._v("PATH")]),s._v(" 中可以找到安装好的 Terraform。另外，需要设定好华为云的鉴权信息（通过设置环境变量或者在 HCL 脚本的 "),t("code",[s._v("provider")]),s._v(" 语句块中配置）。")]),s._v(" "),t("p",[s._v("Then it would print something like (if running successfully):")]),s._v(" "),t("p",[s._v("如果运行命令成功，将会打印出类似如下的信息：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:\n  + create\n\nTerraform will perform the following actions:\n\n  # huaweicloud_compute_eip_associate.hadmin_associated[0] will be created\n  + resource "huaweicloud_compute_eip_associate" "hadmin_associated" {\n      + fixed_ip    = (known after apply)\n      + id          = (known after apply)\n      + instance_id = (known after apply)\n      + port_id     = (known after apply)\n      + public_ip   = (known after apply)\n      + region      = (known after apply)\n    }\n\n...... ......\n\nPlan: 12 to add, 0 to change, 0 to destroy.\n\nChanges to Outputs:\n  + hadmin_access_ip    = [\n      + (known after apply),\n    ]\n  + hadmin_public_ip    = [\n      + (known after apply),\n    ]\n\n...... ......\n\n─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────\n\nNote: You didn\'t use the -out option to save this plan, so Terraform can\'t guarantee to take exactly these actions if you run "terraform apply" now.\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br")])]),t("p",[s._v("在预览和检查过将可能发生的变化后，如果变化不符合预期，可以通过修改配置文件来修正；如果计划符合预期行为，\n则可以直接通过运行"),t("a",{attrs:{href:"https://www.terraform.io/cli/commands/apply",target:"_blank",rel:"noopener noreferrer"}},[s._v("命令"),t("OutboundLink")],1),s._v(" "),t("code",[s._v("terraform apply")]),s._v(" 以应用它。\n如果运行成功，输出的信息会和之前类似，加上一个新出现的确认框：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("Do you want to perform these actions?\n  Terraform will perform the actions described above.\n  Only 'yes' will be accepted to approve.\n\n  Enter a value:\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("预定的计划完成后，Terraform 将生成一些输出。使用下面的命令可以查看运行的结果：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("terraform output\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("which yields:")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('Outputs:\n\nhadmin_access_ip = [\n  "192.168.0.64",\n]\nhadmin_public_ip = [\n  tostring(null),\n]\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[s._v("可以通过使用 "),t("code",[s._v("output")]),s._v(" 语句块来简化部署 HStream 集群的流程。在这里演示了如何\n获取部署所必须的公网和内网 IP 信息，可以从每一台实例的\n字段 "),t("code",[s._v("public_ip")]),s._v(" 和 "),t("code",[s._v("access_ip_v4")]),s._v(" 获得。注意，如果在创建好 ECS 实例后绑定弹性\n公网 IP，需要使用命令 "),t("code",[s._v("terraform refresh")]),s._v(" 刷新结果后才能在 "),t("code",[s._v("terraform output")]),s._v("\n的结果中看到所需的信息。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('Outputs:\n\nhadmin_access_ip = [\n  "192.168.0.64",\n]\nhadmin_public_ip = [\n  "1**.6*.1**.1**",\n]\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[t("a",{attrs:{href:"https://www.terraform.io/cli/commands/output",target:"_blank",rel:"noopener noreferrer"}},[s._v("命令"),t("OutboundLink")],1),s._v(" "),t("code",[s._v("terraform output -json")]),s._v(" 将输出结\n果以 JSON 格式展示，可以方便地与 "),t("code",[s._v("jq")]),s._v(" 一类的命令行工具进行交互。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("terraform output -json "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" jq "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'zookeeper_access_ip.value'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.0.149"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("在获取完所有需要的公网与内网 IP 后，便可\n以配置 HStream 集群快速启动配置文件来进行部署了。\n接下来的步骤可以参考文档"),t("RouterLink",{attrs:{to:"/zh/latest/deployment/quick-deploy-ssh.html"}},[s._v("使用 Docker 和 SSH 快速部署")]),s._v("。")],1),s._v(" "),t("p",[s._v("Terraform 还提供了命令来根据创建资源所使用的 TCL 文件来删除所创建的资源：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("terraform apply -destroy\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("（注意：截至 2020 年2 月 25 日，华为云在应用该命令时不会删除创建计算实例创建的磁盘）。")])])}),[],!1,null,null,null);a.default=e.exports}}]);